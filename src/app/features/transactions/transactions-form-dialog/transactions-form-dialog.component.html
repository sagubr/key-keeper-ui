<mat-dialog-content>
	<mat-stepper linear #stepper>
		<mat-step [stepControl]="firstFormGroup">
			<form [formGroup]="firstFormGroup">
				<ng-template matStepLabel>Informações</ng-template>
				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Solicitante</mat-label>
							<mat-select formControlName="requester" [compareWith]="compareById"
										(selectionChange)="onRequesterChange($event.value)">
								<mat-option *ngFor="let element of requesters" [value]="element">
									{{ element.name }}
								</mat-option>
							</mat-select>
							<mat-error *ngIf="firstFormGroup.get('requester')?.invalid">
								Você deve inserir um valor
							</mat-error>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">

						<app-select-wrapped
							formControlName="permission"
							(change)="onPermissionChange($event)"
							[options]="permissions"
							[isLoading]="loadings.permissions!"
							[displayFn]="userDisplay"
							placeholder="Sala"
							hint="Selecione uma sala para empŕestimo"
						></app-select-wrapped>

					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Status</mat-label>
							<mat-select formControlName="status" [compareWith]="compareById">
								<mat-option *ngFor="let element of status" [value]="element">{{ element }}</mat-option>
							</mat-select>
							<mat-error *ngIf="firstFormGroup.get('status')?.invalid">
								Você deve inserir um valor
							</mat-error>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Chave</mat-label>
							<mat-select formControlName="key" [compareWith]="compareById">
								<mat-option *ngFor="let element of keys" [value]="element">
									{{ element.code }} - {{ element.description }}
								</mat-option>
							</mat-select>
							<mat-error *ngIf="firstFormGroup.get('key')?.invalid">
								Você deve inserir um valor
							</mat-error>
						</mat-form-field>
					</div>
				</div>

				<div class="align-end">
					<button mat-button class="button-primary" [disabled]="firstFormGroup.invalid" matStepperNext>
						Avançar
					</button>
				</div>
			</form>
		</mat-step>

		<mat-step [stepControl]="secondFormGroup">
			<form [formGroup]="secondFormGroup" (ngSubmit)="onSubmit()">
				<ng-template matStepLabel>Período</ng-template>
				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Data de início</mat-label>
							<input matInput
								   [matDatepicker]="datepickerStartDateTime"
								   formControlName="startDateTime">
							<mat-datepicker #datepickerStartDateTime/>
							<mat-datepicker-toggle [for]="datepickerStartDateTime" matSuffix/>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Horário de início</mat-label>
							<input matInput
								   [matTimepicker]="timepickerStartDateTime"
								   formControlName="startDateTime"
								   matTimepickerMin="06:00"
								   matTimepickerMax="23:00"
							>
							<mat-timepicker #timepickerStartDateTime/>
							<mat-timepicker-toggle [for]="timepickerStartDateTime" matSuffix/>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Data final</mat-label>
							<input matInput
								   [matDatepicker]="datepickerEndDateTime"
								   formControlName="endDateTime">
							<mat-datepicker #datepickerEndDateTime/>
							<mat-datepicker-toggle [for]="datepickerEndDateTime" matSuffix/>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Horário final</mat-label>
							<input matInput
								   [matTimepicker]="timepickerEndDateTime"
								   formControlName="endDateTime"
								   matTimepickerMin="06:00"
								   matTimepickerMax="23:00"
							>
							<mat-timepicker #timepickerEndDateTime/>
							<mat-timepicker-toggle [for]="timepickerEndDateTime" matSuffix/>
						</mat-form-field>
					</div>
				</div>

				<div class="align-end">
					<button
						mat-button
						class="button-secondary"
						matStepperPrevious>
						Voltar
					</button>
					<button
						mat-button
						class="button-primary"
						type="submit"
						matStepperNext>
						Salvar
					</button>
				</div>
			</form>
		</mat-step>
	</mat-stepper>
</mat-dialog-content>
