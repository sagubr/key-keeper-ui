openapi: 3.0.1
info:
    title: key-keeper
    version: "0.0"
servers:
    - url: http://localhost:8080/
security:
    - Authorization: []
tags:
    - name: Requesters
      description: Operações relacionadas a entidade solicitantes
    - name: Users
      description: Operações relacionadas a entidade Usuário
    - name: Reservation
      description: Operações relacionadas a entidade reservas
    - name: Location
      description: Operações relacionadas à entidade Localização
    - name: Permissions
      description: Operações relacionadas a entidade Permissão
    - name: Keys
      description: Operações relacionadas a entidade Chaves
    - name: LocationType
      description: Operações relacionadas a entidade Tipos de Ambiente
    - name: JobTitle
      description: Operações relacionadas a entidade cargo
paths:
    /api/job-title:
        get:
            tags:
                - JobTitle
            summary: Obter todos os cargos
            operationId: findAllJobTitle
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/JobTitle"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/keys:
        get:
            tags:
                - Keys
            summary: Obter todas as chaves
            operationId: getAllKeys
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/Key"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/location:
        get:
            tags:
                - Location
            summary: Obter todos as salas
            operationId: findAllLocations
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/Location"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/location-type:
        get:
            tags:
                - LocationType
            summary: Obter todos os tipos de ambiente
            operationId: getAllTypeEnvironments
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/LocationType"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/location/{id}:
        get:
            tags:
                - Location
            summary: Obter detalhes de um ambiente por ID
            operationId: findByIdLocation
            parameters:
                - name: id
                  in: path
                  required: true
                  schema:
                      type: string
                      format: uuid
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/Location"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/permissions:
        get:
            tags:
                - Permissions
            summary: Obter todas as permissões
            operationId: getAllPermissions
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/Permission"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/requesters:
        get:
            tags:
                - Requesters
            summary: Obter todos os solicitantes
            operationId: getAllRequesters
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/Requester"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/reservations:
        get:
            tags:
                - Reservation
            summary: Obter todas as reservas
            operationId: getAllReservations
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/Reservation"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/users:
        get:
            tags:
                - Users
            summary: Obter todos os usuários
            operationId: findAllUsers
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: "#/components/schemas/User"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
    /api/users/save:
        post:
            tags:
                - Users
            summary: Criar novo usuário
            operationId: saveUser
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/UserDto"
                required: true
            responses:
                "200":
                    description: Operação bem sucedida
                    content:
                        application/json:
                            schema:
                                $ref: "#/components/schemas/User"
                "401":
                    description: Falha de autenticação
                "403":
                    description: Acesso não autorizado
                "404":
                    description: Recurso não encontrado
                "422":
                    description: Erro de validação
                    content:
                        application/json:
                            schema: {}
                "500":
                    description: Erro
                    content:
                        application/json:
                            schema: {}
components:
    schemas:
        EntityPattern:
            type: object
            properties:
                id:
                    type: string
                    format: uuid
                    nullable: true
                version:
                    type: integer
                    format: int32
                active:
                    type: boolean
                createdAt:
                    type: string
                    format: date-time
                updatedAt:
                    type: string
                    format: date-time
        Facility:
            required:
                - name
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
        JobTitle:
            required:
                - name
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
        Key:
            required:
                - description
                - location
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      description:
                          type: string
                      location:
                          $ref: "#/components/schemas/Location"
        Location:
            required:
                - facility
                - locationType
                - name
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
                      facility:
                          $ref: "#/components/schemas/Facility"
                      locationType:
                          $ref: "#/components/schemas/LocationType"
        LocationType:
            required:
                - name
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
        Permission:
            required:
                - endDateTime
                - location
                - requester
                - startDateTime
                - user
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      location:
                          $ref: "#/components/schemas/Location"
                      requester:
                          $ref: "#/components/schemas/Requester"
                      user:
                          $ref: "#/components/schemas/User"
                      description:
                          type: string
                      startDateTime:
                          type: string
                          format: date-time
                      endDateTime:
                          type: string
                          format: date-time
        Requester:
            required:
                - email
                - name
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
                      email:
                          type: string
                      register:
                          type: string
                      jobTitle:
                          nullable: true
                          allOf:
                              - $ref: "#/components/schemas/JobTitle"
        Reservation:
            required:
                - endDateTime
                - startDateTime
                - status
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      permission:
                          nullable: true
                          allOf:
                              - $ref: "#/components/schemas/Permission"
                      location:
                          nullable: true
                          allOf:
                              - $ref: "#/components/schemas/Location"
                      user:
                          nullable: true
                          allOf:
                              - $ref: "#/components/schemas/User"
                      notes:
                          type: string
                      startDateTime:
                          type: string
                          format: date-time
                      endDateTime:
                          type: string
                          format: date-time
                      status:
                          $ref: "#/components/schemas/Status"
        Roles:
            type: string
            enum:
                - VIEWER
                - EDITOR
                - MODERATOR
                - MANAGER
                - SUPER_ADMIN
        Status:
            type: string
            enum:
                - RESERVATION
                - AGENDADO
                - AND_PROGRESS
        User:
            required:
                - email
                - name
                - password
                - roles
                - username
            type: object
            allOf:
                - $ref: "#/components/schemas/EntityPattern"
                - properties:
                      name:
                          type: string
                      username:
                          type: string
                      email:
                          type: string
                      password:
                          type: string
                      roles:
                          $ref: "#/components/schemas/Roles"
        UserDto:
            required:
                - password
                - roles
                - username
            type: object
            properties:
                email:
                    type: string
                name:
                    type: string
                password:
                    type: string
                username:
                    type: string
                roles:
                    $ref: "#/components/schemas/Roles"
    securitySchemes:
        Authorization:
            type: http
            scheme: bearer
            bearerFormat: JWT
